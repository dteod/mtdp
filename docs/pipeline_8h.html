<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mtdp: include/mtdp/pipeline.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">mtdp<span id="projectnumber">&#160;0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_2d3ae8018822fb94f6dbe050784e5bd3.html">mtdp</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">pipeline.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Header containing the main mtdp_pipeline struct and API.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="pipe_8h_source.html">mtdp/pipe.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="source_8h_source.html">mtdp/source.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="stage_8h_source.html">mtdp/stage.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sink_8h_source.html">mtdp/sink.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for pipeline.h:</div>
<div class="dyncontent">
<div class="center"><img src="pipeline_8h__incl.png" border="0" usemap="#ainclude_2mtdp_2pipeline_8h" alt=""/></div>
<map name="ainclude_2mtdp_2pipeline_8h" id="ainclude_2mtdp_2pipeline_8h">
<area shape="rect" title="Header containing the main mtdp_pipeline struct and API." alt="" coords="153,5,308,32"/>
<area shape="rect" href="pipe_8h.html" title="Header containing the pipe opaque struct and APIs to interact with it." alt="" coords="243,80,333,107"/>
<area shape="rect" href="source_8h.html" title="Header containing the mtdp_source struct, API and related utilities." alt="" coords="358,80,463,107"/>
<area shape="rect" href="stage_8h.html" title="Header containing the mtdp_stage struct, API and related utilities." alt="" coords="5,80,104,107"/>
<area shape="rect" href="sink_8h.html" title="Header containing the mtdp_sink struct, API and related utilities." alt="" coords="128,80,219,107"/>
<area shape="rect" title=" " alt="" coords="251,155,317,181"/>
<area shape="rect" title=" " alt="" coords="341,155,411,181"/>
<area shape="rect" title=" " alt="" coords="29,155,104,181"/>
<area shape="rect" href="buffer_8h.html" title="Header containing the mtdp_buffer alias." alt="" coords="128,155,227,181"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="pipeline_8h__dep__incl.png" border="0" usemap="#ainclude_2mtdp_2pipeline_8hdep" alt=""/></div>
<map name="ainclude_2mtdp_2pipeline_8hdep" id="ainclude_2mtdp_2pipeline_8hdep">
<area shape="rect" title="Header containing the main mtdp_pipeline struct and API." alt="" coords="5,5,160,32"/>
<area shape="rect" href="mtdp_8h.html" title="Umbrella header used to import libmtdp." alt="" coords="29,80,136,107"/>
</map>
</div>
</div>
<p><a href="pipeline_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmtdp__pipeline__params.html">mtdp_pipeline_params</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Struct used as pipeline creation parameters, to be filled with configuration data.  <a href="structmtdp__pipeline__params.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unionmtdp__pipeline__parameters.html">mtdp_pipeline_parameters</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convenience union used to pad the <a class="el" href="structmtdp__pipeline__params.html" title="Struct used as pipeline creation parameters, to be filled with configuration data.">mtdp_pipeline_params</a> struct, for future implementations.  <a href="unionmtdp__pipeline__parameters.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ae2e4fb889fd1ec7a7e2dee260eccb890"><td class="memItemLeft" align="right" valign="top">typedef struct s_mtdp_pipeline&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pipeline_8h.html#ae2e4fb889fd1ec7a7e2dee260eccb890">mtdp_pipeline</a></td></tr>
<tr class="memdesc:ae2e4fb889fd1ec7a7e2dee260eccb890"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opaque struct used to manage a multi-threaded data pipeline.  <a href="pipeline_8h.html#ae2e4fb889fd1ec7a7e2dee260eccb890">More...</a><br /></td></tr>
<tr class="separator:ae2e4fb889fd1ec7a7e2dee260eccb890"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab91feeed21b7f092464010820abbaaaf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pipeline_8h.html#ae2e4fb889fd1ec7a7e2dee260eccb890">mtdp_pipeline</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pipeline_8h.html#ab91feeed21b7f092464010820abbaaaf">mtdp_pipeline_create</a> (const <a class="el" href="unionmtdp__pipeline__parameters.html">mtdp_pipeline_parameters</a> *params)</td></tr>
<tr class="memdesc:ab91feeed21b7f092464010820abbaaaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a multi-threaded data pipeline and returns a pointer to it.  <a href="pipeline_8h.html#ab91feeed21b7f092464010820abbaaaf">More...</a><br /></td></tr>
<tr class="separator:ab91feeed21b7f092464010820abbaaaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a448c9508806902c43ef64f47f96ba78a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pipeline_8h.html#a448c9508806902c43ef64f47f96ba78a">mtdp_pipeline_destroy</a> (<a class="el" href="pipeline_8h.html#ae2e4fb889fd1ec7a7e2dee260eccb890">mtdp_pipeline</a> *pipeline)</td></tr>
<tr class="memdesc:a448c9508806902c43ef64f47f96ba78a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys a pipeline.  <a href="pipeline_8h.html#a448c9508806902c43ef64f47f96ba78a">More...</a><br /></td></tr>
<tr class="separator:a448c9508806902c43ef64f47f96ba78a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af142ec22a0aac60c28781e7b039eeb89"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmtdp__source.html">mtdp_source</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pipeline_8h.html#af142ec22a0aac60c28781e7b039eeb89">mtdp_pipeline_get_source</a> (<a class="el" href="pipeline_8h.html#ae2e4fb889fd1ec7a7e2dee260eccb890">mtdp_pipeline</a> *pipeline)</td></tr>
<tr class="memdesc:af142ec22a0aac60c28781e7b039eeb89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the source stage of a pipeline.  <a href="pipeline_8h.html#af142ec22a0aac60c28781e7b039eeb89">More...</a><br /></td></tr>
<tr class="separator:af142ec22a0aac60c28781e7b039eeb89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36207b3468eeff31f6d788ece60c734a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmtdp__stage.html">mtdp_stage</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pipeline_8h.html#a36207b3468eeff31f6d788ece60c734a">mtdp_pipeline_get_stages</a> (<a class="el" href="pipeline_8h.html#ae2e4fb889fd1ec7a7e2dee260eccb890">mtdp_pipeline</a> *pipeline)</td></tr>
<tr class="memdesc:a36207b3468eeff31f6d788ece60c734a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the array of internal stages of a pipeline.  <a href="pipeline_8h.html#a36207b3468eeff31f6d788ece60c734a">More...</a><br /></td></tr>
<tr class="separator:a36207b3468eeff31f6d788ece60c734a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff9e35309377c8b255573ac6db8ffb27"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmtdp__sink.html">mtdp_sink</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pipeline_8h.html#aff9e35309377c8b255573ac6db8ffb27">mtdp_pipeline_get_sink</a> (<a class="el" href="pipeline_8h.html#ae2e4fb889fd1ec7a7e2dee260eccb890">mtdp_pipeline</a> *pipeline)</td></tr>
<tr class="memdesc:aff9e35309377c8b255573ac6db8ffb27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the sink stage of a pipeline.  <a href="pipeline_8h.html#aff9e35309377c8b255573ac6db8ffb27">More...</a><br /></td></tr>
<tr class="separator:aff9e35309377c8b255573ac6db8ffb27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1664f842341cf72a0d65c9c1e81fede2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pipe_8h.html#a0a8c8fba113256125d0d36b6f34e1ab4">mtdp_pipe</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pipeline_8h.html#a1664f842341cf72a0d65c9c1e81fede2">mtdp_pipeline_get_pipes</a> (<a class="el" href="pipeline_8h.html#ae2e4fb889fd1ec7a7e2dee260eccb890">mtdp_pipeline</a> *pipeline)</td></tr>
<tr class="memdesc:a1664f842341cf72a0d65c9c1e81fede2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the array of pipes of a pipeline.  <a href="pipeline_8h.html#a1664f842341cf72a0d65c9c1e81fede2">More...</a><br /></td></tr>
<tr class="separator:a1664f842341cf72a0d65c9c1e81fede2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e25676da62b288fd5bdedf1e28f6f87"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pipeline_8h.html#a4e25676da62b288fd5bdedf1e28f6f87">mtdp_pipeline_enable</a> (<a class="el" href="pipeline_8h.html#ae2e4fb889fd1ec7a7e2dee260eccb890">mtdp_pipeline</a> *pipeline)</td></tr>
<tr class="memdesc:a4e25676da62b288fd5bdedf1e28f6f87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables a pipeline.  <a href="pipeline_8h.html#a4e25676da62b288fd5bdedf1e28f6f87">More...</a><br /></td></tr>
<tr class="separator:a4e25676da62b288fd5bdedf1e28f6f87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91f283a89c95267244ecb3e284493dbb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pipeline_8h.html#a91f283a89c95267244ecb3e284493dbb">mtdp_pipeline_disable</a> (<a class="el" href="pipeline_8h.html#ae2e4fb889fd1ec7a7e2dee260eccb890">mtdp_pipeline</a> *pipeline)</td></tr>
<tr class="memdesc:a91f283a89c95267244ecb3e284493dbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables a pipeline.  <a href="pipeline_8h.html#a91f283a89c95267244ecb3e284493dbb">More...</a><br /></td></tr>
<tr class="separator:a91f283a89c95267244ecb3e284493dbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a858a5492b550b64da0c2a23334fffc59"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pipeline_8h.html#a858a5492b550b64da0c2a23334fffc59">mtdp_pipeline_start</a> (<a class="el" href="pipeline_8h.html#ae2e4fb889fd1ec7a7e2dee260eccb890">mtdp_pipeline</a> *pipeline)</td></tr>
<tr class="memdesc:a858a5492b550b64da0c2a23334fffc59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts a pipeline.  <a href="pipeline_8h.html#a858a5492b550b64da0c2a23334fffc59">More...</a><br /></td></tr>
<tr class="separator:a858a5492b550b64da0c2a23334fffc59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac999ad468fe32abc4631f411d8d9a8d5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pipeline_8h.html#ac999ad468fe32abc4631f411d8d9a8d5">mtdp_pipeline_stop</a> (<a class="el" href="pipeline_8h.html#ae2e4fb889fd1ec7a7e2dee260eccb890">mtdp_pipeline</a> *pipeline)</td></tr>
<tr class="memdesc:ac999ad468fe32abc4631f411d8d9a8d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops a pipeline.  <a href="pipeline_8h.html#ac999ad468fe32abc4631f411d8d9a8d5">More...</a><br /></td></tr>
<tr class="separator:ac999ad468fe32abc4631f411d8d9a8d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aceaf4f063eb9176f727c81c541a6e2f2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pipeline_8h.html#aceaf4f063eb9176f727c81c541a6e2f2">mtdp_pipeline_wait</a> (<a class="el" href="pipeline_8h.html#ae2e4fb889fd1ec7a7e2dee260eccb890">mtdp_pipeline</a> *pipeline)</td></tr>
<tr class="memdesc:aceaf4f063eb9176f727c81c541a6e2f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits for a pipeline to finish execution.  <a href="pipeline_8h.html#aceaf4f063eb9176f727c81c541a6e2f2">More...</a><br /></td></tr>
<tr class="separator:aceaf4f063eb9176f727c81c541a6e2f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Header containing the main mtdp_pipeline struct and API. </p>
<p >Avoid importing this file in user code, prefer the <a class="el" href="mtdp_8h.html" title="Umbrella header used to import libmtdp.">mtdp.h</a> umbrella header. </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="ae2e4fb889fd1ec7a7e2dee260eccb890" name="ae2e4fb889fd1ec7a7e2dee260eccb890"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2e4fb889fd1ec7a7e2dee260eccb890">&#9670;&nbsp;</a></span>mtdp_pipeline</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct s_mtdp_pipeline <a class="el" href="pipeline_8h.html#ae2e4fb889fd1ec7a7e2dee260eccb890">mtdp_pipeline</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opaque struct used to manage a multi-threaded data pipeline. </p>
<p >A pipeline is a struct containing multiple threads operating concurrently and synchronously on a data stream.</p>
<p >Three kinds of threads compose a pipeline, namely</p><ul>
<li>a source stage (always present)</li>
<li>a user-configurable number of internal stages (0 is a valid number)</li>
<li>a sink stage (always present)</li>
</ul>
<p >Each stage is to be configured by the user to provide a callback that will operate on the data stream in isolation and in a single-threaded manner, together with some additional data the stage may use internally.</p>
<p >Pipes are used to handle access to the data in a synchronous manner using user-configurable buffers that will be passed from a previous stage to the next without contention.</p>
<p >Operation on the pipeline may be stopped and disabled both from the outside</p><ul>
<li>using the API provided in this header - or from the inside by the source stage - using the mtdp_source_finished API (useful when operating on files or other streams with a fixed length). In the former case data already present in the pipeline and not already flushed by the sink will be discarded, while in the latter case the pipeline will finish processing data that was filled in the buffers until some processing may be performed. <code>mtdp_pipeline_wait</code> may be used to wait on the pipeline to finish execution before disabling it. Also, the pipeline may be paused and resumed without data losses (the threads will be put in sleep), but not from within the stage.</li>
</ul>
<p >The pipeline can be seen as having three states:</p><ul>
<li>disabled: threads are not created, only data is allocated</li>
<li>enabled: threads are created, but not operating</li>
<li>active: threads are created and running State transitions are handled by the API, a false value is returned when performing an illegal operation and the library-owned errno is set accordingly to the actual fault.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>All the functions used on this struct that somehow change the pipeline internal state are not thread-safe. Pipelines are designed to be configured and handled from a single thread; if access from multiple threads is necessary, the user shall provide its own synchronization mechanism. The only allowed thread-safe mechanism is to wait on a pipeline to finish execution without active state changes. </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ab91feeed21b7f092464010820abbaaaf" name="ab91feeed21b7f092464010820abbaaaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab91feeed21b7f092464010820abbaaaf">&#9670;&nbsp;</a></span>mtdp_pipeline_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pipeline_8h.html#ae2e4fb889fd1ec7a7e2dee260eccb890">mtdp_pipeline</a> * mtdp_pipeline_create </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="unionmtdp__pipeline__parameters.html">mtdp_pipeline_parameters</a> *&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a multi-threaded data pipeline and returns a pointer to it. </p>
<p >This function will search for memory to allocate both the pipeline and its internal structures, and it will return it after a preconfiguration so that the next configuration steps will be to retrieve and fill the source/stage/sink structures, to resize the (already allocated) pipes, and to allocate the buffers.</p>
<p >Depending on how the library is configured, memory for the pipeline and/or its internal will be retrieved from either a static global storage pool, or from the heap.</p>
<p >Future implementations reserve the possibility to customize the pipeline behavior using runtime parameters provided with <code>params</code> .</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">params</td><td>pointer to a pipeline_parameters creation structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>mtdp_pipeline* a pipeline to be configured, NULL on error </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MTDP_OK</td><td></td></tr>
    <tr><td class="paramname">MTDP_NO_MEM</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a448c9508806902c43ef64f47f96ba78a" name="a448c9508806902c43ef64f47f96ba78a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a448c9508806902c43ef64f47f96ba78a">&#9670;&nbsp;</a></span>mtdp_pipeline_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mtdp_pipeline_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pipeline_8h.html#ae2e4fb889fd1ec7a7e2dee260eccb890">mtdp_pipeline</a> *&#160;</td>
          <td class="paramname"><em>pipeline</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroys a pipeline. </p>
<p >Effectively deallocates all memory allocated for the pipeline. If the pipeline is active is will be disabled first.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pipeline</td><td>the pipeline to destroy </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MTDP_OK</td><td></td></tr>
    <tr><td class="paramname">MTDP_BAD_PTR</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a91f283a89c95267244ecb3e284493dbb" name="a91f283a89c95267244ecb3e284493dbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91f283a89c95267244ecb3e284493dbb">&#9670;&nbsp;</a></span>mtdp_pipeline_disable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mtdp_pipeline_disable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pipeline_8h.html#ae2e4fb889fd1ec7a7e2dee260eccb890">mtdp_pipeline</a> *&#160;</td>
          <td class="paramname"><em>pipeline</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disables a pipeline. </p>
<p >Disabling a pipeline means destroying the threads on the stages and clearing the pipes (i.e. putting back all the buffers in the pool). This function works on both enabled pipelines and active pipelines.</p>
<dl class="section note"><dt>Note</dt><dd>If another thread is waiting on a pipeline to finish and it is disabled, the thread waiting will resume execution.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The order in which the buffers are put back in the pool is not deterministic and it varies with the pipeline's internal status: the cleared pipe will have an unsorted pool.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pipeline</td><td>the pipeline to disable </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success, false on error </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MTDP_OK</td><td></td></tr>
    <tr><td class="paramname">MTDP_BAD_PTR</td><td></td></tr>
    <tr><td class="paramname">MTDP_NOT_ENABLED</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4e25676da62b288fd5bdedf1e28f6f87" name="a4e25676da62b288fd5bdedf1e28f6f87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e25676da62b288fd5bdedf1e28f6f87">&#9670;&nbsp;</a></span>mtdp_pipeline_enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mtdp_pipeline_enable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pipeline_8h.html#ae2e4fb889fd1ec7a7e2dee260eccb890">mtdp_pipeline</a> *&#160;</td>
          <td class="paramname"><em>pipeline</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enables a pipeline. </p>
<p >Enabling a pipeline means storing data the user inserted in the internal structures and creating the threads that will be used to process data. Threads will be idle after a successful enable, and the pipeline shall be started to become active.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pipeline</td><td>the pipeline to enable </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success, false on error </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MTDP_OK</td><td></td></tr>
    <tr><td class="paramname">MTDP_BAD_PTR</td><td></td></tr>
    <tr><td class="paramname">MTDP_ENABLED</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1664f842341cf72a0d65c9c1e81fede2" name="a1664f842341cf72a0d65c9c1e81fede2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1664f842341cf72a0d65c9c1e81fede2">&#9670;&nbsp;</a></span>mtdp_pipeline_get_pipes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pipe_8h.html#a0a8c8fba113256125d0d36b6f34e1ab4">mtdp_pipe</a> * mtdp_pipeline_get_pipes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pipeline_8h.html#ae2e4fb889fd1ec7a7e2dee260eccb890">mtdp_pipeline</a> *&#160;</td>
          <td class="paramname"><em>pipeline</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the array of pipes of a pipeline. </p>
<p >The pipes shall be resized by the user in order for the pipeline to be fully operational. A pipe containing more buffers may be used to account for stages with a higher latency. After a resize, buffers shall also be allocated from the user. Pipes may be resized at runtime as long as the pipeline is not operating (i.e. enabled and started).</p>
<dl class="section note"><dt>Note</dt><dd>The pipes array size equals 1 + <code>internal_stages</code>, where <code>internal_stages</code> is the parameter used when creating the pipeline.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Resizing a pipe to a smaller value may lead to data loss.</dd>
<dd>
The user may retrieve the data, then start the pipeline, then modify data via the returned pointer: this means requesting a data race.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pipeline</td><td>the pipeline to retrieve the pipes from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>mtdp_stage* the internal stages of the pipeline, NULL on error </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MTDP_OK</td><td></td></tr>
    <tr><td class="paramname">MTDP_BAD_PTR</td><td></td></tr>
    <tr><td class="paramname">MTDP_ACTIVE</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aff9e35309377c8b255573ac6db8ffb27" name="aff9e35309377c8b255573ac6db8ffb27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff9e35309377c8b255573ac6db8ffb27">&#9670;&nbsp;</a></span>mtdp_pipeline_get_sink()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmtdp__sink.html">mtdp_sink</a> * mtdp_pipeline_get_sink </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pipeline_8h.html#ae2e4fb889fd1ec7a7e2dee260eccb890">mtdp_pipeline</a> *&#160;</td>
          <td class="paramname"><em>pipeline</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the sink stage of a pipeline. </p>
<p >The sink stage shall be filled with user data in order for the pipeline to operate it. Data can be modified at runtime as long as the pipeline is not operating (i.e. enabled and started).</p>
<dl class="section warning"><dt>Warning</dt><dd>The user may retrieve the data, then start the pipeline, then modify data via the returned pointer: this means requesting a data race.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pipeline</td><td>the pipeline to retrieve the sink stage from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>mtdp_sink* the sink stage of the pipeline, NULL on error </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MTDP_OK</td><td></td></tr>
    <tr><td class="paramname">MTDP_BAD_PTR</td><td></td></tr>
    <tr><td class="paramname">MTDP_ACTIVE</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af142ec22a0aac60c28781e7b039eeb89" name="af142ec22a0aac60c28781e7b039eeb89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af142ec22a0aac60c28781e7b039eeb89">&#9670;&nbsp;</a></span>mtdp_pipeline_get_source()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmtdp__source.html">mtdp_source</a> * mtdp_pipeline_get_source </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pipeline_8h.html#ae2e4fb889fd1ec7a7e2dee260eccb890">mtdp_pipeline</a> *&#160;</td>
          <td class="paramname"><em>pipeline</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the source stage of a pipeline. </p>
<p >The source stage shall be filled with user data in order for the pipeline to operate it. Data can be modified at runtime as long as the pipeline is not operating (i.e. enabled and started).</p>
<dl class="section warning"><dt>Warning</dt><dd>The user may retrieve the data, then start the pipeline, then modify data via the returned pointer: this means requesting a data race.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pipeline</td><td>the pipeline to retrieve the source stage from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>mtdp_source* the source stage of the pipeline, NULL on error </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MTDP_OK</td><td></td></tr>
    <tr><td class="paramname">MTDP_BAD_PTR</td><td></td></tr>
    <tr><td class="paramname">MTDP_ACTIVE</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a36207b3468eeff31f6d788ece60c734a" name="a36207b3468eeff31f6d788ece60c734a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36207b3468eeff31f6d788ece60c734a">&#9670;&nbsp;</a></span>mtdp_pipeline_get_stages()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmtdp__stage.html">mtdp_stage</a> * mtdp_pipeline_get_stages </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pipeline_8h.html#ae2e4fb889fd1ec7a7e2dee260eccb890">mtdp_pipeline</a> *&#160;</td>
          <td class="paramname"><em>pipeline</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the array of internal stages of a pipeline. </p>
<p >The internal stages shall be filled with user data in order for the pipeline to operate it. Data can be modified at runtime as long as the pipeline is not operating (i.e. enabled and started).</p>
<dl class="section note"><dt>Note</dt><dd>The stages array size equals the <code>internal_stages</code> parameter used when creating the pipeline.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The user may retrieve the data, then start the pipeline, then modify data via the returned pointer: this means requesting a data race.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pipeline</td><td>the pipeline to retrieve the stages from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>mtdp_stage* the internal stages of the pipeline, NULL on error </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MTDP_OK</td><td></td></tr>
    <tr><td class="paramname">MTDP_BAD_PTR</td><td></td></tr>
    <tr><td class="paramname">MTDP_ACTIVE</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a858a5492b550b64da0c2a23334fffc59" name="a858a5492b550b64da0c2a23334fffc59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a858a5492b550b64da0c2a23334fffc59">&#9670;&nbsp;</a></span>mtdp_pipeline_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mtdp_pipeline_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pipeline_8h.html#ae2e4fb889fd1ec7a7e2dee260eccb890">mtdp_pipeline</a> *&#160;</td>
          <td class="paramname"><em>pipeline</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts a pipeline. </p>
<p >Starting a pipeline means waking up the threads previously put to sleep to make them start working on the data stream.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pipeline</td><td>the pipeline to start </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success, false on error </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MTDP_OK</td><td></td></tr>
    <tr><td class="paramname">MTDP_BAD_PTR</td><td></td></tr>
    <tr><td class="paramname">MTDP_ACTIVE</td><td></td></tr>
    <tr><td class="paramname">MTDP_NOT_ENABLED</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac999ad468fe32abc4631f411d8d9a8d5" name="ac999ad468fe32abc4631f411d8d9a8d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac999ad468fe32abc4631f411d8d9a8d5">&#9670;&nbsp;</a></span>mtdp_pipeline_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mtdp_pipeline_stop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pipeline_8h.html#ae2e4fb889fd1ec7a7e2dee260eccb890">mtdp_pipeline</a> *&#160;</td>
          <td class="paramname"><em>pipeline</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops a pipeline. </p>
<p >Stopping a pipeline means putting the threads to sleep and returning to the <code>enabled</code> state.</p>
<dl class="section note"><dt>Note</dt><dd>Another thread waiting on the pipeline to finish will not be resumed if this function is called.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pipeline</td><td>the pipeline to stop </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success, false on error </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MTDP_OK</td><td></td></tr>
    <tr><td class="paramname">MTDP_BAD_PTR</td><td></td></tr>
    <tr><td class="paramname">MTDP_ENABLED</td><td></td></tr>
    <tr><td class="paramname">MTDP_NOT_ENABLED</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aceaf4f063eb9176f727c81c541a6e2f2" name="aceaf4f063eb9176f727c81c541a6e2f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aceaf4f063eb9176f727c81c541a6e2f2">&#9670;&nbsp;</a></span>mtdp_pipeline_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mtdp_pipeline_wait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pipeline_8h.html#ae2e4fb889fd1ec7a7e2dee260eccb890">mtdp_pipeline</a> *&#160;</td>
          <td class="paramname"><em>pipeline</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Waits for a pipeline to finish execution. </p>
<p >This function will return when it will dynamically detect any of these conditions:</p><ul>
<li>the pipeline is not enabled</li>
<li>all the stages are not processing any data from at least 100 ms The function does not return if the pipeline is in the enabled state (i.e. the threads are sleeping).</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>This function is thread-safe, i.e. it may be called concurrently on the same pipeline object from multiple threads, even while another thread is actively changing the pipeline state.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pipeline</td><td>the pipeline to wait </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MTDP_OK</td><td></td></tr>
    <tr><td class="paramname">MTDP_BAD_PTR</td><td></td></tr>
    <tr><td class="paramname">MTDP_NOT_ENABLED</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
